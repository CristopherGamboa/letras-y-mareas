<div class="flex justify-center">
    <div class="flex flex-col bg-cloud-100 gap-y-4 rounded shadow md:w-1/3 p-6">
        <h1 class="text-storm-100/50 font-semibold text-lg md:text-2xl text-center">
            Registrarse
        </h1>

        <form [formGroup]="form" (ngSubmit)="register()" class="flex flex-col gap-y-10">
            <div class="flex flex-col gap-2">
                @let nameControl = form.get('name');

                <div class="relative z-0">
                    <input type="name" id="name" formControlName="name" class="block py-2.5 px-0 w-full text-sm 
                    text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none 
                    focus:ring-0 focus:border-andes-blue-500 peer" placeholder=" " />
                    <label for="name" class="absolute text-sm text-gray-500
                    duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 
                    peer-focus:text-andes-blue-500 peer-placeholder-shown:scale-100 
                    peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6 
                    rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto">Nombre</label>
                </div>

                @if (nameControl && nameControl.errors && nameControl.touched && nameControl.invalid) {
                    <app-form-control-errors [isControlTouched]="nameControl.touched" 
                    [controlErrors]="nameControl.errors" />
                }
            </div>

            <div class="flex flex-col gap-4">
                @let emailControl = form.get('email');

                <div class="relative z-0">
                    <input type="email" id="email" formControlName="email" class="block py-2.5 px-0 w-full text-sm 
                    text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none 
                    focus:ring-0 focus:border-andes-blue-500 peer" placeholder=" "/>
                    <label for="email" class="absolute text-sm text-gray-500
                    duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 
                    peer-focus:text-andes-blue-500 peer-placeholder-shown:scale-100 
                    peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6 
                    rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto">Correo electrónico</label>
                </div>
                
                @if (emailControl && emailControl.errors != null && emailControl.touched && emailControl.invalid) {
                    <app-form-control-errors [isControlTouched]="emailControl.touched" 
                    [controlErrors]="emailControl.errors" />
                }
            </div>

            <div class="flex flex-col gap-4">
                @let passwordControl = form.get('password');

                <div class="relative z-0">
                    <input type="password" id="password" formControlName="password" class="block py-2.5 px-0 w-full text-sm 
                    text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none 
                    focus:ring-0 focus:border-andes-blue-500 peer" placeholder=" " />
                    <label for="password" class="absolute text-sm text-gray-500
                    duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 
                    peer-focus:text-andes-blue-500 peer-placeholder-shown:scale-100 
                    peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6 
                    rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto">Contraseña</label>
                </div>

                @if (passwordControl && passwordControl.errors != null && passwordControl.touched && passwordControl.invalid) {
                    <app-form-control-errors [isControlTouched]="passwordControl.touched" 
                    [controlErrors]="passwordControl.errors" />
                }
            </div>


            <div class="flex flex-col gap-4">
                @let passwordConfirmationControl = form.get('passwordConfirmation');
                
                <div class="relative z-0">
                    <input type="password" id="passwordConfirmation" formControlName="passwordConfirmation" class="block py-2.5 px-0 w-full text-sm 
                    text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none 
                    focus:ring-0 focus:border-andes-blue-500 peer" placeholder=" " />
                    <label for="passwordConfirmation" class="absolute text-sm text-gray-500
                    duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 
                    peer-focus:text-andes-blue-500 peer-placeholder-shown:scale-100 
                    peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6 
                    rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto">Confirmar contraseña</label>
                </div>
                
                @if (passwordConfirmationControl && passwordConfirmationControl.touched) {
                    <app-form-control-errors [controlErrors]="form.errors" 
                    [isControlTouched]="passwordConfirmationControl.touched" />
                }
            </div>
                
            <button type="submit" [disabled]="!form.valid" class="bg-warm-gold-500 text-white p-2
             font-semibold hover:bg-warm-gold-600 disabled:bg-warm-gold-500/60 disabled:hover:bg-warm-gold-500/60 
             disabled:cursor-not-allowed">
                Confirmar
            </button>
        </form>

        <a class="flex justify-center cursor-pointer bg-andes-blue-500 text-white p-2 font-semibold 
        hover:bg-andes-blue-600" routerLink="/auth/login">
            Volver
        </a>

        <p class="text-green-500 text-sm text-center">
            {{ message()}}
        </p>
    </div>
</div>